<block tpl-id="overSeaResidenceContainer">

    <div id="map-sell-banner" class='banner'>
        <div class="header">
            <img src="../assets/img/icon.png" alt="好识买"/>
            <div id="haoshimai">好识买</div>
            <div id="area"><a href="/overseaCitySelection" data-id="{{cityId}}">{{cityName}}</a></div>
            <div>美国房产</div>
        </div>
        <div class="sub">
            <ul>
                <li style="width: 100%;text-align: center">{{cityName}} &nbsp; {{regionName}} &nbsp; {{plateName}}</li>
            </ul>
        </div>
    </div>

    
    
    <style>
        #mainContentOverseaResidence {
            position: fixed;
            top:70px;
            width:100%;
            overflow: auto;
        }
        
        #mainContentOverseaResidence .residence{
            cursor: pointer;
        }
        .sort_bar {
            text-align:center;
            position: fixed;
            bottom: 0px;
            width:100%;
            padding:10px 0px;
            cursor:pointer;
            background: rgba(0,0,0,.6);
            background-repeat: no-repeat;
            background-position: center;
            font-size: 20px;
            color: #ffffff;
        }

        .sort_bar a {
            color: #ffffff;
        }

        #positionPanel td {
            font-size: 15px;
            padding:5px;
        }

        #positionPanel .click {
            cursor: pointer;
        }

        #positionPanel .highlight {
            background: #000000;
        }
        #positionPanel .cancel{
            float:left;
        }
        #positionPanel .confirm{
            float:right;
        }

    </style>
    <div id="mainContentOverseaResidence">

        {{#each data}}
        <div class='residence-wrap' data-id="{{this.residenceId}}" data-name="{{this.residenceName}}" data-sale="{{this.onSaleCount}}" data-rent="{{this.onRentCount}}">
            <div class='residence'>
                <img src="{{this.picURL.[0]}}"/>
                <div class='info'>
                    <div class="details">
                        <span class="highlight">{{this.residenceName}}</span>
                    </div>
                    <div class="details">
                        <span class="detail" style="width:100%">均价: <span class="highlight"> {{this.price}}</span></span>
                    </div>
                    <div class='details last'>
                    <span class="detail">
                        在售: {{this.onSaleCount}}
                    </span>
                    </div>
                </div>
            </div>
        </div>
        {{/each}}
    </div>
    <div class="sort_bar">

        <div id="positionPanel" style="display: none">
            <table align="center">
                <tr>
                    <td colspan="3" style="text-align: center">
                        <button class="cancel" id="cancel">取消</button>
                        <button class="confirm" id="confirm">确定</button>
                    </td>
                </tr>
                <tr>
                    <td id="cityList">
                        <div class="click" data-id="2">
                            南加州
                        </div>
                        <div class="click" data-id="3">
                            北加州
                        </div>
                    </td>

                    <td id="regionList">
                        <div parent-data-id="2">
                            <div data-id="0" class="click">全部</div>
                            {{#each southCA}}
                                <div data-id="{{this.regionId}}" class="click">{{this.regionName}}</div>
                            {{/each}}
                        </div>

                        <div parent-data-id="3">
                            <div data-id="0" class="click">全部</div>
                            {{#each northCA}}
                            <div data-id="{{this.regionId}}" class="click">{{this.regionName}}</div>
                            {{/each}}
                        </div>
                    </td>

                    <td id="plateList">
                        {{#each southCA}}
                        <div parent-data-id="{{this.regionId}}">
                            <div data-id="0" class="click">全部</div>
                            {{#each this.plateList}}
                            <div data-id="{{this.id}}" class="click">{{this.name}}</div>
                            {{/each}}
                        </div>
                        {{/each}}

                        {{#each northCA}}
                        <div parent-data-id="{{this.regionId}}">
                            <div data-id="0" class="click">全部</div>
                            {{#each this.plateList}}
                            <div data-id="{{this.id}}" class="click">{{this.name}}</div>
                            {{/each}}
                        </div>
                        {{/each}}
                    </td>
                </tr>
            </table>
        </div>

        <div id="optionPanel">
            <span id="positionSelection" style="padding-right: 30px;cursor: pointer">地点</span> |
            <span style="padding: 0px 30px;"><a href="/enquiryHistory?">问询</a></span> |
            <span style="padding-left:30px;"><a href="/residenceSearch?saleRent=sale">搜索</a></span>
        </div>
    </div>
</block>
<script>

    $(document).ready(function(){
        var resize = function() {
           document.getElementById('mainContentOverseaResidence').style.height = (document.body.clientHeight - 70).toString() + 'px';
        };

        setTimeout(function() {
            $(document).on('click', '.residence-wrap', function() {
                console.log('click residence');
                var url = '/houseList?residenceId' + $(this).attr('data-id') + '&saleRent=sale&residenceName=' + $(this).attr('data-name')
                        + '&saleCount=' + $(this).attr('data-sale');
                window.location.href = url;
            });
            setInterval(resize, 1000);
        }, 1000);
    });

</script>